var myApp=angular.module("myApp",["ngRoute"]);myApp.config(["$routeProvider","$locationProvider",function(e,o){o.hashPrefix(""),e.when("/home",{templateUrl:"/views/templates/home.html",controller:"LoginController"}).when("/register",{templateUrl:"/views/templates/register.html",controller:"LoginController"}).when("/user",{templateUrl:"/views/templates/user.html",controller:"UserController",resolve:{getuser:["UserService",function(e){return e.getuser()}]}}).when("/mainPage",{templateUrl:"/views/templates/mainPage.html",controller:"MainPageController",resolve:{getuser:["UserService",function(e){return e.getuser()}]}}).otherwise({redirectTo:"home"})}]),myApp.controller("LoginController",["$scope","$http","$location","UserService",function(e,o,r,t){e.user={username:"",password:""},e.login=function(){""===e.user.username||""===e.user.password?alert("You forgot to enter something in. Please enter your username and password."):o.post("/",e.user).then(function(e){e.data.username?(console.log("success: ",e.data),r.path("/user")):(console.log("failure: ",e),alert("Your username or password was incorrect. Please try again."))})},e.registerUser=function(){""===e.user.username||""===e.user.password?alert("You forgot to enter something in. Please choose a username and password."):o.post("/register",e.user).then(function(e){console.log("success"),r.path("/home")},function(e){console.log("error"),alert("Please try again.")})}}]),myApp.controller("MainPageController",["$scope","$http","$location","UserService",function(e,o,r,t){console.log("Main Page Controller loaded"),e.logout=t.logout}]),myApp.controller("UserController",["$scope","$http","$location","UserService",function(e,o,r,t){e.userObject=t.userObject,e.logout=t.logout}]),myApp.factory("UserService",["$http","$location",function(e,o){console.log("User Service Loaded");var r={};return{userObject:r,getuser:function(){e.get("/user").then(function(e){e.data.username?r.userName=e.data.username:o.path("/home")})},logout:function(){e.get("/user/logout").then(function(e){console.log("logged out"),o.path("/home")})}}}]);